# Android Studio テスト実行ガイド

## 🎯 テスト目標
RoomStylerアプリの全機能が正常に動作することを段階的に確認する

## 📋 Phase 1: プロジェクトセットアップ

### ✅ 1-1. プロジェクトを開く
1. Android Studioを起動
2. **"Open an Existing Project"** をクリック
3. `C:\Users\shimp\Android_RoomStyler` を選択
4. **"OK"** をクリック

### ✅ 1-2. Gradle Sync
1. 自動的にGradle Syncが開始されます
2. 下部の **"Build"** タブでプログレスを確認
3. **"BUILD SUCCESSFUL"** が表示されるまで待機
4. エラーが出た場合は次のセクションを参照

### 🔧 トラブルシューティング
```
よくあるエラーと解決策:

1. "SDK not found"
   → File → Project Structure → SDK Location で設定

2. "Gradle version mismatch"
   → File → Project Structure → Project で Gradle Version を確認

3. "Missing dependencies"
   → Tools → SDK Manager で必要なSDKをインストール
```

## 📋 Phase 2: ビルドテスト

### ✅ 2-1. プロジェクトビルド
1. **Build** → **Make Project** (Ctrl+F9)
2. 下部の **"Build"** タブで結果を確認
3. ✅ **"BUILD SUCCESSFUL"** を確認

### ✅ 2-2. ユニットテスト実行
1. 左側のプロジェクトビューで **app/src/test** を展開
2. **test** フォルダを右クリック
3. **"Run 'Tests in 'test''"** を選択
4. テスト結果ウィンドウで結果を確認

**期待される結果:**
- ✅ FurnitureMapperTest: 3/3 tests passed
- ✅ ArSceneManagerTest: 6/6 tests passed  
- ✅ FurnitureSeederTest: 6/6 tests passed

## 📋 Phase 3: エミュレータセットアップ

### ✅ 3-1. AVD (Android Virtual Device) 作成
1. **Tools** → **AVD Manager**
2. **"Create Virtual Device"** をクリック
3. **デバイス選択:**
   - Category: Phone
   - Name: Pixel 4 または Pixel 5
4. **システムイメージ選択:**
   - API Level: **29** (Android 10.0) 以上
   - ABI: **x86_64**
   - Target: Google APIs (ARCore対応)
5. **"Download"** でシステムイメージをダウンロード
6. **"Next"** → **"Finish"**

### ✅ 3-2. エミュレータ起動
1. AVD Managerで作成したデバイスの **▶️** をクリック
2. エミュレータの起動を待つ（初回は数分かかります）
3. ホーム画面が表示されることを確認

## 📋 Phase 4: アプリ実行テスト

### ✅ 4-1. アプリインストール・起動
1. **Run** → **Run 'app'** (Shift+F10)
2. デプロイターゲットでエミュレータを選択
3. **"OK"** をクリック
4. アプリのインストールと起動を確認

### ✅ 4-2. 基本機能テスト

#### ホーム画面テスト
- [ ] アプリが正常に起動する
- [ ] "RoomStyler" タイトルが表示される
- [ ] "部屋をスキャン" ボタンが表示される
- [ ] "カタログ" ボタンが表示される
- [ ] "最近のレイアウト" セクションが表示される
- [ ] 初回起動時は "まだレイアウトがありません" メッセージ

#### 画面遷移テスト
- [ ] "部屋をスキャン" → スキャン画面に遷移
- [ ] "カタログ" → カタログ画面に遷移
- [ ] 戻るボタンで前の画面に戻る
- [ ] ナビゲーションバーの動作

#### データベーステスト
1. **カタログ画面を開く**
2. **確認項目:**
   - [ ] 家具一覧が表示される（18種類程度）
   - [ ] カテゴリが表示される（デスク、チェア等）
   - [ ] 家具の詳細情報（名前、価格、サイズ）
   - [ ] 検索機能が動作する

## 📋 Phase 5: AR機能テスト (実機必要)

### ⚠️ 注意事項
- AR機能はエミュレータでは動作しません
- ARCore対応の実機が必要です
- 以下は実機でのテスト手順です

### ✅ 5-1. 実機接続
1. USB デバッグを有効にした実機を接続
2. **Run** → **Run 'app'** で実機を選択
3. アプリを実機にインストール

### ✅ 5-2. AR機能テスト
1. **スキャン画面を開く**
2. **カメラ権限を許可**
3. **"AR開始" をタップ**
4. **確認項目:**
   - [ ] カメラ映像が表示される
   - [ ] 床面の平面検出（白い点々）
   - [ ] 床面タップで立方体が配置される
   - [ ] 立方体の選択・移動・回転
   - [ ] "立方体を追加" ボタンの動作
   - [ ] 削除機能の動作

### ✅ 5-3. スナップショット機能
- [ ] 📷 アイコンでスナップショット撮影
- [ ] 成功メッセージの表示
- [ ] 画像の保存確認

### ✅ 5-4. JSON機能
- [ ] 💾 アイコンでJSONエクスポート
- [ ] エクスポートされたJSONの表示
- [ ] 📁 アイコンでJSONインポート
- [ ] シーンの復元確認

## 📊 テスト結果記録

### 環境情報
- Android Studio バージョン: ________________
- エミュレータ: ________________
- 実機 (AR用): ________________
- テスト実行日: ________________

### Phase 1: セットアップ
- [ ] ✅ プロジェクト読み込み成功
- [ ] ✅ Gradle Sync成功
- [ ] ❌ エラーあり: ________________

### Phase 2: ビルド
- [ ] ✅ ビルド成功
- [ ] ✅ ユニットテスト成功 (___/15 passed)
- [ ] ❌ エラーあり: ________________

### Phase 3: エミュレータ
- [ ] ✅ AVD作成成功
- [ ] ✅ エミュレータ起動成功
- [ ] ❌ エラーあり: ________________

### Phase 4: 基本機能
- [ ] ✅ アプリ起動成功
- [ ] ✅ ホーム画面表示
- [ ] ✅ 画面遷移動作
- [ ] ✅ データベース機能
- [ ] ❌ エラーあり: ________________

### Phase 5: AR機能 (実機のみ)
- [ ] ✅ 実機接続成功
- [ ] ✅ カメラ権限取得
- [ ] ✅ AR初期化成功
- [ ] ✅ 平面検出動作
- [ ] ✅ オブジェクト配置
- [ ] ✅ オブジェクト操作
- [ ] ✅ スナップショット機能
- [ ] ✅ JSON機能
- [ ] ❌ エラーあり: ________________

## 🚨 よくある問題と解決策

### ビルドエラー
```
1. "Cannot resolve symbol"
   → File → Invalidate Caches and Restart

2. "Gradle sync failed"
   → gradle.properties の設定確認
   → インターネット接続確認

3. "SDK not found"
   → Tools → SDK Manager でSDKインストール
```

### 実行時エラー
```
1. アプリがクラッシュする
   → Logcat でエラーログ確認
   → Run → Debug 'app' でデバッグ実行

2. 権限エラー
   → AndroidManifest.xml の権限設定確認
   → 実機の設定で権限許可

3. ARCoreエラー
   → Google Play Store でARCore更新
   → ARCore対応デバイス確認
```

## 📞 サポート情報

### ログの確認方法
1. **View** → **Tool Windows** → **Logcat**
2. フィルタで "com.example.roomstyler" を設定
3. エラーレベルを "Error" に設定

### デバッグ実行
1. **Run** → **Debug 'app'** (Shift+F9)
2. ブレークポイントを設定してステップ実行
3. Variables ウィンドウで変数の値を確認

テストで問題が発生した場合は、エラーメッセージとLogcatの内容を確認してください！
